# use ubuntu 18.04
dist: bionic
language: python
python:
  - "3.7"
services:
  - mysql
#  - docker
# command to setup sql feedback docker container
before_install:
  - mkdir -p ~/.ssh && echo "Host araxconfig.rtx.ai\n" > ~/.ssh/config && echo "    StrictHostKeyChecking no\n" >> ~/.ssh/config
  - echo "Host arax.ncats.io\n" >> ~/.ssh/config && echo "    StrictHostKeyChecking no\n" >> ~/.ssh/config
  - echo -e "${TRAVIS_KEY//_/\\n}" > ~/.ssh/id_rsa
  - chmod og-rwx ~/.ssh/id_rsa
  - whoami
  - ifconfig
#  - bash ./code/kg2/install-docker-ubuntu18.sh
# cache directories
# cache:
#   directories:
#   - ./code/ARAX/KnowledgeSources/NormalizedGoogleDistance
#   - ./code/ARAX/KnowledgeSources/Prediction
#   - ./code/ARAX/KnowledgeSources/COHD_local/data
# command to install python dependencies
install:
  - pip install -r requirements.txt
  - pip install reasoner_validator
# command to run tests
script: pytest -v ./code/ARAX/test/test_ARAX_filter_kg.py --disable-pytest-warnings
